---
title: "Liczby dualne"

about:
  template: marquee

execute:
  freeze: true  # never re-render during project render
---

Implementujemy [liczby dualne](https://www.wikiwand.com/en/articles/Dual_number) w Pythonie. Nasza implementacja powinna być napisana w pliku `dual_numbers.py`.

Celem tego zadania jest zaimplementowanie klasy `DualNumber` w Pythonie. Liczby dualne są rozszerzeniem liczb rzeczywistych o specjalny element 'ε' (epsilon), taki że ε² = 0. Są one używane w automatycznym różniczkowaniu.

**Liczba dualna:** Liczba postaci a + bε, gdzie 'a' i 'b' są liczbami rzeczywistymi, a ε jest jednostką nieskończenie małą.

**Instrukcje:**

1.  **Definicja klasy:**
    * Utwórz klasę o nazwie `DualNumber`.
    * Konstruktor `__init__` powinien przyjmować dwa argumenty, `real` i `dual`, reprezentujące odpowiednio 'a' i 'b' w a + bε. Oba powinny domyślnie wynosić 0.
    * Zapisz te wartości jako atrybuty `self.real` i `self.dual`.

2.  **Reprezentacja jako napis:**
    * Zaimplementuj metody `__str__` i `__repr__`, aby zapewnić przyjazną dla użytkownika reprezentację napisową liczby dualnej. Powinna ona wyglądać odpowiednio jak "a + bε" lub "a - bε" dla `__str__` i "DualNumber(a,b)" dla `__repr__`.

3.  **Operacje arytmetyczne:**

    * Zaimplementuj następujące operacje arytmetyczne, aby umożliwić obliczenia na liczbach dualnych:
        * `__add__` (+): (a + bε) + (c + dε) = (a + c) + (b + d)ε
        * `__sub__` (-): (a + bε) - (c + dε) = (a - c) + (b - d)ε
        * `__mul__` (*): (a + bε) * (c + dε) = ac + (ad + bc)ε
        * `__truediv__` (/): (a + bε) / (c + dε) = (a/c) + ((bc - ad)/c²)ε  (Załóż, że c != 0)
        * `__pow__` (**): (a + bε)^n = a^n + n*a^(n-1)*bε
        * `__neg__` (-): -(a + bε) = -a - bε
    * Zaimplementuj prawostronne wersje tych operacji, aby obsługiwać przypadki takie jak 2 + (a + bε):
        * `__radd__`
        * `__rsub__`
        * `__rmul__`
        * `__rtruediv__`
        * `__rpow__`

4.  **Operacje porównania:**
    * Zaimplementuj następujące operacje porównania:
        * `__eq__` (==): (a + bε) == (c + dε) jeśli a == c i b == d
        * `__ne__` (!=): (a + bε) != (c + dε) jeśli a != c lub b != d

5.  **Konwersja na int i float:**
    * Zaimplementuj metody `__int__` i `__float__`, aby umożliwić konwersję liczby dualnej na typy `int` i `float`.  Konwersja powinna zwracać tylko część rzeczywistą liczby dualnej.

6.  **Dodatkowe funkcje matematyczne (opcjonalne):**
    * Zaimplementuj inne funkcje matematyczne jako metody klasy:
        * `sqrt(z)`: Pierwiastek kwadratowy liczby dualnej.
        * `exp(z)`: Funkcja wykładnicza liczby dualnej.
        * `sin(z)`: Sinus liczby dualnej.
        * `cos(z)`: Cosinus liczby dualnej.


Poniżej znajduje się przykład użycia klasy `DualNumber`, (kod kliencki). Twoja implementacja powinna umożliwić poprawne działanie tego kodu.

```{python}
# | eval: false

from dual_numbers import DualNumber, epsilon


funcje_zaimplementowane = False

# Utwórz kilka liczb dualnych
a = DualNumber(2, 3)  # 2 + 3ε
b = DualNumber(1, 4)  # 1 + 4ε
c = DualNumber(5, 0)  # 5 + 0ε (odpowiednik liczby rzeczywistej 5)
d = 1 + 2 * epsilon  # 1 + 2ε

# Wypisz liczby dualne
print("Liczba dualna a:", a)
print("Liczba dualna b:", b)
print("Epsilon:", epsilon)

# Podstawowe operacje arytmetyczne
print("Dodawanie:", a + b)
print("Odejmowanie:", a - b)
print("Mnożenie:", a * b)
print("Dzielenie:", a / b)
print("Potęgowanie:", a**2)
print("Negacja", -a)

# Operacje prawostronne
print("Dodawanie prawe:", 1 + a)
print("Odejmowanie prawe:", 5 - a)
print("Mnożenie prawe:", 2 * a)
print("Dzielenie prawe:", 10 / a)
print("Potęgowanie prawe", 2**a)

# Operacje porównania
print("Równość:", a == b)
print("Nierówność:", a != b)
print("Równość:", a == DualNumber(2, 3))

# Konwersja na int i float
print("Konwersja na int:", int(a))
print("Konwersja na float:", float(a))

# Opcjonalne funkcje na liczbach dualnych
if funcje_zaimplementowane:
    print("Pierwiastek kwadratowy z a:", DualNumber.sqrt(a))
    print("Funkcja wykładnicza z a:", DualNumber.exp(a))
    print("Sinus z a:", DualNumber.sin(a))
    print("Cosinus z a:", DualNumber.cos(a))

```
